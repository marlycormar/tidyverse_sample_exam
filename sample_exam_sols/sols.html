<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.78">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Marly Gotti">

<title>Tidyverse Certification</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="sols_files/libs/clipboard/clipboard.min.js"></script>
<script src="sols_files/libs/quarto-html/quarto.js"></script>
<script src="sols_files/libs/quarto-html/popper.min.js"></script>
<script src="sols_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="sols_files/libs/quarto-html/anchor.min.js"></script>
<link href="sols_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="sols_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="sols_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="sols_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="sols_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<link href="sols_files/libs/quarto-contrib/fontawesome6-0.1.0/all.css" rel="stylesheet">
<link href="sols_files/libs/quarto-contrib/fontawesome6-0.1.0/latex-fontsize.css" rel="stylesheet">
<style>html{ scroll-behavior: smooth; }</style>


</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article toc-left">
<div id="quarto-sidebar-toc-left" class="sidebar toc-left">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#about-the-certification" id="toc-about-the-certification" class="nav-link active" data-scroll-target="#about-the-certification">About the certification</a>
  <ul class="collapse">
  <li><a href="#resources" id="toc-resources" class="nav-link" data-scroll-target="#resources">Resources</a></li>
  <li><a href="#need-help" id="toc-need-help" class="nav-link" data-scroll-target="#need-help">Need help?</a></li>
  </ul></li>
  <li><a href="#sample-exam" id="toc-sample-exam" class="nav-link" data-scroll-target="#sample-exam">Sample Exam</a>
  <ul class="collapse">
  <li><a href="#instructions" id="toc-instructions" class="nav-link" data-scroll-target="#instructions">Instructions</a></li>
  <li><a href="#question-1" id="toc-question-1" class="nav-link" data-scroll-target="#question-1">Question 1</a></li>
  <li><a href="#question-2" id="toc-question-2" class="nav-link" data-scroll-target="#question-2">Question 2</a></li>
  <li><a href="#question-3" id="toc-question-3" class="nav-link" data-scroll-target="#question-3">Question 3</a></li>
  <li><a href="#question-4" id="toc-question-4" class="nav-link" data-scroll-target="#question-4">Question 4</a></li>
  </ul></li>
  </ul>
</nav>
</div>
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
</div>
<main class="content page-columns page-full" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Tidyverse Certification</h1>
<p class="subtitle lead">Sample Exam with Solutions</p>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p><a href="https://www.marlygotti.com">Marly Gotti</a> </p>
          </div>
  </div>
    
  
    
  </div>
  

</header>

<p><a href="https://github.com/marlycormar/tidyverse_sample_exam">Report issues <i class="fa-brands fa-github" aria-label="github"></i></a></p>
<section id="about-the-certification" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="about-the-certification">About the certification</h2>

<div class="no-row-height column-margin column-container"><div class="">
<p><img src="images/logos.png" class="img-fluid"></p>
</div></div><p>The Tidyverse Certification is provided by RStudio and it attests to your pedagogical skills and knowledge of the Tidyverse ecosystem. To obtain the certification, the first step is to participate in a one-day training course that focuses on teaching methodologies. The second step is to pass two exams: a teaching exam and a Tidyverse exam. Below you will find solutions to the Tidyverse sample example provided by RStudio.</p>
<p>For more information on how to get certified, you can navigate to the <a href="https://education.rstudio.com/trainers/">trainers</a> site.</p>
<section id="resources" class="level3">
<h3 class="anchored" data-anchor-id="resources">Resources</h3>
<ul>
<li><p>Slides used by <a href="https://github.com/gvwilson">Greg</a> during training: <a href="https://drive.google.com/drive/folders/13ohFt3D0EJ5PDbMaWTxnHH-hwA7G0IvY">google drive</a>.</p></li>
<li><p>RStudio Blog announcing the RStudio Tidyverse Certification: <a href="https://education.rstudio.com/blog/2020/02/instructor-certification-exams/">blog</a>.</p></li>
<li><p>Official RStudio Instructor Training and Certification site: <a href="https://education.rstudio.com/trainers/">website</a>.</p></li>
</ul>
</section>
<section id="need-help" class="level3">
<h3 class="anchored" data-anchor-id="need-help">Need help?</h3>
<p>Reach out! I am a certified RStudio instructor for both the Tidyverse ecosystem and Shiny. There are other amazing trainers out there; check out the full list <a href="https://education.rstudio.com/trainers/">here</a>.</p>
</section>
</section>
<section id="sample-exam" class="level2">
<h2 class="anchored" data-anchor-id="sample-exam">Sample Exam</h2>
<section id="instructions" class="level3">
<h3 class="anchored" data-anchor-id="instructions">Instructions</h3>
<ol type="1">
<li><p>This exam covers material from R for Data Science <a href="https://r4ds.had.co.nz/">https://r4ds.had.co.nz/</a>. If you have any questions about scope, please get in touch - we’d be happy to clarify.</p></li>
<li><p>You may use any books or online resources you want during this examination, but you may not communicate with any person other than your examiner.</p></li>
<li><p>You are required to use the RStudio IDE for this exam. You may use either the desktop edition or rstudio.cloud as you prefer.</p></li>
<li><p>You may do your work in an R script or an R Markdown file, and may use one for the whole exam or one for each question as your prefer. Whichever you choose, you must send your final work to the examiner by email upon completion of the examination.</p></li>
<li><p>Please let the examiner know when you finish each part of each question so that they can check your work.</p></li>
</ol>
<!---------------------------------------------------------------------------->
<!--------------------------- QUESTION 1
<!---------------------------------------------------------------------------->
</section>
<section id="question-1" class="level3">
<h3 class="anchored" data-anchor-id="question-1">Question 1</h3>
<p>The file <a href="https://education.rstudio.com/blog/2020/02/instructor-certification-exams/at_health_facilities.csv">at_health_facilities.csv</a> contains a tidy dataset with four columns:</p>
<ul>
<li>The ISO3 code of the country that reported data.</li>
<li>The year for which data was reported.</li>
<li>The percentage of HIV-positive children born to HIV-positive mothers age 15–17.</li>
<li>The percentage of HIV-positive children born to HIV-positive mothers age 20–34.</li>
</ul>
<p>Please answer the following questions:</p>
<ol type="1">
<li>How many countries reported data?</li>
<li>What is the difference between the minimum and maximum year with valid data for each country?</li>
<li>How many countries reported data in 3 or more years?</li>
<li>Which countries reported 100% incidence for at least one year in either age group?</li>
</ol>
<!---------------------------------------------------------------------------->
<section id="solution-to-question-1" class="level4">
<h4 class="anchored" data-anchor-id="solution-to-question-1">Solution to Question 1</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Read dataset.</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>hiv <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"../data/at_health_facilities.csv"</span>)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="do">## Q1: How many countries reported data? </span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="do">## A1: 100 countries reported data.</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(<span class="fu">unique</span>(hiv<span class="sc">$</span>iso3))</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="do">## Q2: What is the difference between the minimum and maximum year with valid</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="do">## data for each country?</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="do">## A2: The difference set is the column `diff` below.</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>hiv <span class="sc">%&gt;%</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">is.numeric</span>(<span class="st">`</span><span class="at">age 15-17</span><span class="st">`</span>) <span class="sc">|</span> <span class="fu">is.numeric</span>(<span class="st">`</span><span class="at">age 20-34</span><span class="st">`</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(iso3) <span class="sc">%&gt;%</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">diff =</span> <span class="fu">max</span>(year) <span class="sc">-</span> <span class="fu">min</span>(year))</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a><span class="do">## Q3: How many countries reported data in 3 or more years?</span></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a><span class="do">## A3: 34 countries.</span></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>hiv <span class="sc">%&gt;%</span></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(iso3) <span class="sc">%&gt;%</span> </span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">years_count =</span> <span class="fu">n_distinct</span>(year)) <span class="sc">%&gt;%</span></span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(years_count <span class="sc">&gt;=</span> <span class="dv">3</span>)</span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a><span class="do">## Q4: Which countries reported 100% incidence for at least one year in either</span></span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a><span class="do">## age group?</span></span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a><span class="do">## A4: 18 countries.</span></span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a>hiv <span class="sc">%&gt;%</span></span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="st">`</span><span class="at">age 15-17</span><span class="st">`</span> <span class="sc">==</span> <span class="dv">100</span> <span class="sc">|</span> <span class="st">`</span><span class="at">age 20-34</span><span class="st">`</span> <span class="sc">==</span> <span class="dv">100</span>) <span class="sc">%&gt;%</span></span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(iso3) <span class="sc">%&gt;%</span></span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<!---------------------------------------------------------------------------->
<!--------------------------- QUESTION 2
<!---------------------------------------------------------------------------->
</section>
</section>
<section id="question-2" class="level3">
<h3 class="anchored" data-anchor-id="question-2">Question 2</h3>
<p>A student has sent you the file <a href="https://education.rstudio.com/blog/2020-01-20-instructor-certification-exams/rmd-country-profile.Rmd">rmd-country-profile.Rmd</a>, which is an R Markdown document analyzing the data in <a href="https://education.rstudio.com/blog/2020/02/instructor-certification-exams/at_health_facilities.csv">at_health_facilities.csv</a> for Bangladesh. They could not knit the file, and are providing you with the raw .Rmd file instead of a rendered file.</p>
<ol type="1">
<li>Go through the file, fixing things that are preventing it from knitting cleanly.</li>
<li>Change the two lines of bold text to H2-level headers to organize the document, and add a table of contents.</li>
<li>Convert this R Markdown report for Bangladesh into a parameterized report with the country’s iso3 code as its parameter. Knit a new country profile for Egypt (ISO3 code “EGY”).</li>
</ol>
<!---------------------------------------------------------------------------->
<section id="solution-to-question-2" class="level4">
<h4 class="anchored" data-anchor-id="solution-to-question-2">Solution to Question 2</h4>
<ol type="1">
<li><p>There are four errors in the RMarkdown file:</p>
<ol type="1">
<li>Line 3: Add missing <code>:</code> to <code>output</code>, i.e., line 3 should read <code>output:</code>. Also, hit tab on line 4 since yaml is sensitive to identation.</li>
<li>Line 9: To set knitting options, use the <code>set</code> function, i.e., line 9 should read: <code>knitr::opts_chunk$set(echo = FALSE)</code>.</li>
<li>Lines 57 &amp; 68: There are two chuncks with the same name <code>plot</code>. You can fix this by changing the name of one of such chuncks or simply getting rid of the names completely.</li>
<li>Lines 60-62: The correct operator is <code>+</code> instead of <code>%&gt;%</code>.</li>
</ol></li>
<li><p>Change bold text of lines 15 &amp; 46 by replacing <code>**</code> to <code>##</code>. To add a table of contents, add <code>toc: TRUE</code> to the yaml options at the top of the RMarkdown file. It should now look as follows.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="sc">---</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>title<span class="sc">:</span> <span class="st">"Country Profile"</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>output<span class="sc">:</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>  html_document<span class="sc">:</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>    theme<span class="sc">:</span> flatly</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>    toc<span class="sc">:</span> <span class="cn">TRUE</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="sc">---</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p>Add <code>params</code> to the yaml options, specifying a variable name to store the country code:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>params<span class="sc">:</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>  country_code<span class="sc">:</span> <span class="st">"BGD"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>and update <code>my_iso3 &lt;- "BGD"</code> (it should now be on line 39) to use this new variable, i.e., <code>my_iso3 &lt;- params$country_code</code>. To knit with a new parameter, you can go to the <strong>Knit</strong> dropdown in the IDE and click <strong>Knit with Parameters</strong> or alternatively, you can run the code below.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>rmarkdown<span class="sc">::</span><span class="fu">render</span>(<span class="st">"rmd-country-profile.Rmd"</span>, <span class="at">params =</span> <span class="fu">list</span>(</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">country_code =</span> <span class="st">"EGY"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
</ol>
<p>The completely fixed RMarkdown is at <a href="../data/fixed_rmd-country-profile.Rmd">data/fixed_rmd-country-profile.Rmd</a>.</p>
<!---------------------------------------------------------------------------->
<!--------------------------- QUESTION 3
<!---------------------------------------------------------------------------->
</section>
</section>
<section id="question-3" class="level3">
<h3 class="anchored" data-anchor-id="question-3">Question 3</h3>
<p>You have been given a CSV file <a href="https://education.rstudio.com/blog/2020/02/instructor-certification-exams/infant_hiv.csv">infant_hiv.csv</a> that is formatted as follows:</p>
<ul>
<li>The first column is ISO3 country codes.</li>
<li>There are three columns for each year from 2009 to 2017. Each set has estimated, low, and high values for the year (in that order).</li>
<li>A dash <code>-</code> indicates that no data is available.</li>
<li>Our analyst tells us that <code>&gt;95%</code> means “the data is unreliable”.</li>
</ul>
<p>Your task is to turn this into a tidy data table for further analysis:</p>
<ol type="1">
<li>Describe what columns a tidy layout for this data would have and why.</li>
<li>Write a function that takes the name of a file containing this table as input and returns a tidy version of the table.
<ul>
<li>The function should replace all <code>-</code> and <code>&gt;95%</code> values with <code>NA</code>.</li>
<li>The body of the function may contain one or more pipelines and may create temporary or intermediate variables, but may not contain any loops.</li>
</ul></li>
</ol>
<!---------------------------------------------------------------------------->
<section id="solution-to-question-3" class="level4">
<h4 class="anchored" data-anchor-id="solution-to-question-3">Solution to Question 3</h4>
<ol type="1">
<li><p>An approach to have a tidy layout for our data is to collapse all the columns but ISO3 into three new columns <code>year</code>, <code>stats</code>, and <code>value</code>. The <code>stats</code> column may contain the values <code>hi</code>, <code>low</code>, or <code>est</code>.</p></li>
<li><p>The function <code>tidy_data</code> implements the approach on part 1.</p></li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>tidy_data <span class="ot">&lt;-</span> <span class="cf">function</span>(file){</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Read data.</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>  raw_data <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(file) </span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Tidy data by splitting the columns using a regex expression.</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>  tidy <span class="ot">&lt;-</span> raw_data <span class="sc">%&gt;%</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">pivot_longer</span>(<span class="sc">-</span>ISO3,</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>                 <span class="at">names_to =</span> <span class="fu">c</span>(<span class="st">"year"</span>, <span class="st">"stats"</span>),</span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>                 <span class="at">names_pattern =</span> <span class="st">"(.*) (.*)"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">value =</span> <span class="fu">case_when</span>(</span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>      value <span class="sc">==</span> <span class="st">"-"</span> <span class="sc">|</span> value <span class="sc">==</span> <span class="st">"&gt;95%"</span> <span class="sc">~</span> <span class="cn">NA_character_</span>,</span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> <span class="fu">str_replace</span>(value, <span class="at">pattern =</span> <span class="st">"%"</span>, <span class="at">replacement =</span> <span class="st">""</span>)</span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>    ))</span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Return tidy data.</span></span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a>  tidy</span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Set data file name/location.</span></span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a>file <span class="ot">&lt;-</span> <span class="st">"../data/infant_hiv.csv"</span></span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Tidy data by calling the function we just created.</span></span>
<span id="cb5-24"><a href="#cb5-24" aria-hidden="true" tabindex="-1"></a><span class="fu">tidy_data</span>(file)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<!---------------------------------------------------------------------------->
<!--------------------------- QUESTION 4
<!---------------------------------------------------------------------------->
</section>
</section>
<section id="question-4" class="level3">
<h3 class="anchored" data-anchor-id="question-4">Question 4</h3>
<p>The file <a href="https://education.rstudio.com/blog/2020/02/instructor-certification-exams/ranking.csv">ranking.csv</a> contains two columns:</p>
<ul>
<li>The ID of an item being rated.</li>
<li>A rating, which is one of “negative”, “positive”, “indifferent”, or “wtf” (meaning the respondent didn’t understand the question).</li>
</ul>
<p>There are multiple ratings for each item. The plot below shows this data:</p>
<ul>
<li>Each dot represents one item i.</li>
<li>The size of the circles shows the total number of ratings for item i.</li>
<li>The X coordinate for item i is the percentage of ratings for that item that are “negative”.</li>
<li>The Y coordinate for item i is the percentage of ratings for that item that are “positive”.</li>
<li>The regression line is created using the ‘lm’ method.</li>
</ul>
<p><img src="../images/ranking-scatterplot-1.png" class="img-fluid"></p>
<p>Re-create this plot using the tidyverse and ggplot2, fixing any mistakes you notice along the way.</p>
<!---------------------------------------------------------------------------->
<section id="solution-to-question-4" class="level4">
<h4 class="anchored" data-anchor-id="solution-to-question-4">Solution to Question 4</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Read data.</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>raw_data <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"../data/ranking.csv"</span>)</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Tidy data to ease plotting.</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>rankings <span class="ot">&lt;-</span> raw_data <span class="sc">%&gt;%</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(item) <span class="sc">%&gt;%</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(rank) <span class="sc">%&gt;%</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> rank, <span class="at">values_from =</span> n) <span class="sc">%&gt;%</span></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">num =</span> <span class="fu">sum</span>(positive, negative, indifferent, wtf, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate_at</span>(<span class="fu">vars</span>(<span class="sc">-</span>item, <span class="sc">-</span>num), <span class="at">.funs =</span> <span class="fu">list</span>(<span class="sc">~</span> <span class="fu">round</span>(.<span class="sc">/</span>num, <span class="at">digits =</span> <span class="dv">2</span>)))</span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Reproduce given plot.</span></span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(rankings, <span class="fu">aes</span>(<span class="at">x =</span> negative, <span class="at">y =</span> positive, <span class="at">size =</span> num)) <span class="sc">+</span></span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">alpha =</span> <span class="fl">0.25</span>)) <span class="sc">+</span></span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method=</span><span class="st">'lm'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="sols_files/figure-html/question_four-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
          // default icon
          link.classList.add("external");
      }
    }
});
</script>
</div> <!-- /content -->



<script src="sols_files/libs/quarto-html/zenscroll-min.js"></script>
</body></html>